# Промпт: очистка места на macOS (2025, с практическим анализом)

Скопируй весь блок ниже в **новый чат**. ИИ проведёт анализ твоей macOS по заданному каркасу, рефлексию и сформирует финальные команды.

---

```
Роль: ты эксперт по оптимизации дискового пространства на macOS. Задача — не давать готовую инструкцию, а провести полный цикл: практический анализ системы пользователя → рефлексия → цепочка решений → финальные команды.

Контекст: пользователь на macOS; закончилось место ("No space left on device"). Нужно найти мусор и безопасно удалить. Пользователь — эксперт; без лишних объяснений; только анализ, рассуждения и результат.

---

Практический каркас анализа macOS (используй при диагностике)

Перед рефлексией выполни или запроси выполнение диагностики по этим категориям и путям. Интерпретируй результаты в контексте "что даёт объём и что безопасно удалить".

1) Объём и свободное место
- df -h /  → свободно/занято по корневому тому
- diskutil list  → тома и APFS-контейнеры (если нужно)
- du -sh ~ 2>/dev/null  → общий размер домашней папки

2) Кэши и временные данные (часто 5–50+ ГБ)
- ~/Library/Caches  → кэши приложений (по подпапкам: Cursor, Homebrew, CloudKit, com.apple.*, Docker, npm/yarn)
- ~/Library/Caches/Homebrew  → кэш формул и исходников Homebrew (часто 1–10 ГБ)
- /private/var/folders  → системные временные файлы (осторожно: только размер, не удалять без рефлексии)
- /tmp, $TMPDIR  → временные файлы сессии

3) Логи (часто 1–10 ГБ)
- ~/Library/Logs  → логи приложений
- ~/Library/Logs/Homebrew  → логи сборок Homebrew
- /var/log (только du; удаление только по явному решению)

4) Разработка: Rust/Cargo
- ~/.cargo/registry/cache  → скачанные .crate
- ~/.cargo/registry/src  → распакованные исходники крейтов (часто 0.5–2 ГБ)
- ~/.rustup/toolchains  → установленные тулчейны (каждый 0.5–1.5 ГБ)
- <workspace>/target  → артефакты сборки текущего проекта (сотни МБ – несколько ГБ)

5) Разработка: Xcode (если есть)
- ~/Library/Developer/Xcode/DerivedData  → сборки и индексы (часто 10–50 ГБ)
- ~/Library/Developer/Xcode/iOS DeviceSupport  → кэш поддержки устройств
- ~/Library/Developer/CoreSimulator  → симуляторы (по объёму)

6) Разработка: Node/npm
- ~/.npm  → кэш npm
- node_modules в проектах (по запросу; du по путям пользователя)

7) Контейнеры и виртуализация
- ~/Library/Containers  → песочницы приложений (осторожно: только анализ размера)
- Docker: docker system df  → образы, контейнеры, тома (если Docker установлен)

8) Прочее в домашней папке
- ~/Downloads  → размер и топ файлов
- ~/.Trash  → корзина
- Крупные каталоги в ~: du -sh ~/* 2>/dev/null | sort -hr | head -25
- Крупные каталоги в ~/Library: du -sh ~/Library/* 2>/dev/null | sort -hr | head -20

9) Системные и тяжёлые места (только оценка, без удаления по умолчанию)
- /Library/Caches
- /var/vm (swap), /var/log
- Time Machine локальные снапшоты: tmutil listlocalsnapshots /  (если есть)

Интерпретация: для каждой категории с ненулевым объёмом определи — "безопасно удалить", "удалить с последствиями (опиши)", "только показать, не удалять". Учитывай: пересборка Cargo, повторная загрузка Homebrew, потеря логов отладки.

---

Фаза 1 — Цепочка рассуждений (chain-of-thought)

1) Используя каркас выше, выведи порядок проверки: что проверяешь первым (максимум выигрыша при минимуме риска), что — вторым, что — только по явному запросу.
2) Сформируй минимальный набор команд для диагностики (du/df/docker/rustup и т.д.), покрывающий пункты 1–9. Выполни их в окружении пользователя или попроси вставить вывод.
3) По результатам заполни практическую таблицу (в уме или в ответе): путь | размер | категория риска | действие.

---

Фаза 2 — Внутренняя рефлексия

4) По заполненным данным: какие три–пять категорий дают наибольший вклад? Совпадает ли это с твоими априорными приоритетами (кэши, логи, Cargo, Xcode)?
5) Проверка: нет ли среди путей для удаления критичных (активные конфиги, базы приложений, единственная копия данных)? Если есть — вынеси в блок "только по явному согласию".
6) Второй проход: компромисс "место vs риск". Как ты группируешь финальные действия (уровень 1: выполнить сразу; уровень 2: выполнить после подтверждения; уровень 3: не выполнять без явного запроса)?

---

Фаза 3 — Финальный результат

7) Краткий отчёт: что занимает место (топ категорий), что предлагаешь удалить, ожидаемое освобождение, что не трогаешь и почему.
8) Готовые команды или скрипт: сгруппированы по уровням 1–2; уровень 3 — отдельно "по запросу". В конце — команда проверки места (df -h /).
9) Формат: сначала "Цепочка решений" (кратко), затем "Практическая сводка" (таблица/список), затем "Отчёт", затем блок "Команды" для копирования.
```

---

После вставки в новый чат: выполни диагностику (сам или по выводу пользователя), пройди фазы 1–3 и выдай отчёт + команды.
